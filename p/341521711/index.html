<!DOCTYPE html>




<html class="theme-next mist" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-ebook.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-ebook.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-ebook.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo-ebook.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="前端,前端开发,JavaScript,Web前端开发,犀牛书,Web开发," />










<meta name="description" content="本书是程序员学习核心JavaScript语言和由Web浏览器定义的JavaScript API的指南和综合参考手册。第6版涵盖HTML 5和ECMAScript 5。很多章节完全重写，以便与时俱进，紧跟当今的最佳Web开发实践。本书新增章节描述了jQuery和服务器端JavaScript。本书适合那些希望学习Web编程语言的初、中级程序员和希望精通JavaScript的JavaScript程序员阅">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript权威指南第6版 [David Flanagan] [pdf]">
<meta property="og:url" content="https://it.ebook-base.com/p/341521711/index.html">
<meta property="og:site_name" content="IT电子书基地">
<meta property="og:description" content="本书是程序员学习核心JavaScript语言和由Web浏览器定义的JavaScript API的指南和综合参考手册。第6版涵盖HTML 5和ECMAScript 5。很多章节完全重写，以便与时俱进，紧跟当今的最佳Web开发实践。本书新增章节描述了jQuery和服务器端JavaScript。本书适合那些希望学习Web编程语言的初、中级程序员和希望精通JavaScript的JavaScript程序员阅">
<meta property="og:image" content="https://it.ebook-base.com/p/341521711/cover.jpg">
<meta property="article:published_time" content="2020-05-20T14:43:08.000Z">
<meta property="article:modified_time" content="2020-05-24T11:40:15.000Z">
<meta property="article:tag" content="前端">
<meta property="article:tag" content="前端开发">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="Web前端开发">
<meta property="article:tag" content="犀牛书">
<meta property="article:tag" content="Web开发">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://it.ebook-base.com/p/341521711/cover.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://it.ebook-base.com/p/341521711/"/>





  <title>JavaScript权威指南第6版 [David Flanagan] [pdf] | IT电子书基地</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  

  <div class="container  page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">IT电子书基地</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">免费全面的IT电子书基地</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" rel="external nofollow noreferrer" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://it.ebook-base.com/p/341521711/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IT电子书基地">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">JavaScript权威指南第6版 [David Flanagan] [pdf]</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-20T22:43:08+08:00">
                2020-05-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <img src="/p/341521711/cover.jpg" class="">

<h2 id="书籍资料"><a href="#书籍资料" class="headerlink" title="书籍资料"></a>书籍资料</h2><p>作者: David Flanagan<br>出版社: 机械工业出版社<br>原作名: JavaScript: The Definitive Guide, Sixth Edition<br>译者: 淘宝前端团队<br>出版年: 2012-4-1<br>页数: 1004<br>定价: 139.00元<br>装帧: 平装<br>丛书: O’reilly系列<br>ISBN: 9787111376613</p>
<h2 id="内容简介"><a href="#内容简介" class="headerlink" title="内容简介"></a>内容简介</h2><p>本书是程序员学习核心JavaScript语言和由Web浏览器定义的JavaScript API的指南和综合参考手册。</p>
<p>第6版涵盖HTML 5和ECMAScript 5。很多章节完全重写，以便与时俱进，紧跟当今的最佳Web开发实践。本书新增章节描述了jQuery和服务器端JavaScript。</p>
<p>本书适合那些希望学习Web编程语言的初、中级程序员和希望精通JavaScript的JavaScript程序员阅读。</p>
<h2 id="作者简介"><a href="#作者简介" class="headerlink" title="作者简介"></a>作者简介</h2><p>David Flanagan是一名程序员，也是一名作家，它的个人网站是 <a href="http://davidflanagan.com" target="_blank" rel="noopener external nofollow noreferrer">http://davidflanagan.com</a> 。他在O’Reilly出版的其他畅销书还包括《JavaScript Pocket Reference》、《The Ruby Programming Language》，以及《Java in a Nutshell》。David毕业于麻生理工学院，获得计算机科学与工程学位。他和妻子和孩子一起生活在西雅图和温哥华之间的美国太平洋西北海岸。</p>
<h2 id="本书目录"><a href="#本书目录" class="headerlink" title="本书目录"></a>本书目录</h2><p>前言 1<br>第1章 JavaScript概述 5<br>1.1 JavaScript语言核心 8<br>1.2 客户端JavaScript 12<br>第一部分 JavaScript 语言核心<br>第2章 词法结构 25<br>2.1 字符集 25<br>2.2 注释 27<br>2.3 直接量 27<br>2.4 标识符和保留字 28<br>2.5 可选的分号 30<br>第3章 类型、值和变量 32<br>3.1 数字 34<br>3.2 文本 38<br>3.3 布尔值 43<br>3.4 null和undefined 44<br>3.5 全局对象 45<br>3.6 包装对象 46<br>3.7 不可变的原始值和可变的对象引用 47<br>3.8 类型转换 48<br>3.9 变量声明 55<br>3.10 变量作用域 56<br>第4章 表达式和运算符 60<br>4.1 原始表达式 60<br>4.2 对象和数组的初始化表达式 61<br>4.3 函数定义表达式 62<br>4.4 属性访问表达式 63<br>4.5 调用表达式 64<br>4.6 对象创建表达式 64<br>4.7 运算符概述 65<br>4.8 算术表达式 69<br>4.9 关系表达式 74<br>4.10 逻辑表达式 79<br>4.11 赋值表达式 81<br>4.12 表达式计算 83<br>4.13 其他运算符 86<br>第5章 语句 91<br>5.1 表达式语句 92<br>5.2 复合语句和空语句 92<br>5.3 声明语句 94<br>5.4 条件语句 96<br>5.5 循环 101<br>5.6 跳转 106<br>5.7 其他语句类型 113<br>5.8 JavaScript语句小结 116<br>第6章 对象 118<br>6.1 创建对象 120<br>6.2 属性的查询和设置 123<br>6.3 删除属性 127<br>6.4 检测属性 128<br>6.5 枚举属性 130<br>6.6 属性getter和setter 132<br>6.7 属性的特性 134<br>6.8 对象的三个属性 138<br>6.9 序列化对象 141<br>6.10 对象方法 142<br>第7章 数组 144<br>7.1 创建数组 144<br>7.2 数组元素的读和写 145<br>7.3 稀疏数组 147<br>7.4 数组长度 148<br>7.5 数组元素的添加和删除 149<br>7.6 数组遍历 149<br>7.7 多维数组 151<br>7.8 数组方法 152<br>7.9 ECMAScript 5中的数组方法 156<br>7.10 数组类型 160<br>7.11 类数组对象 161<br>7.12 作为数组的字符串 163<br>第8章 函数 165<br>8.1 函数定义 166<br>8.2 函数调用 168<br>8.3 函数的实参和形参 173<br>8.4 作为值的函数 178<br>8.5 作为命名空间的函数 181<br>8.6 闭包 182<br>8.7 函数属性、方法和构造函数 188<br>8.8 函数式编程 194<br>第9章 类和模块 201<br>9.1 类和原型 202<br>9.2 类和构造函数 203<br>9.3 JavaScript中Java式的类继承 207<br>9.4 类的扩充 210<br>9.5 类和类型 212<br>9.6 JavaScript中的面向对象技术 217<br>9.7 子类 230<br>9.8 ECMAScript 5 中的类 239<br>9.9 模块 248<br>第10章 正则表达式的模式匹配 253<br>10.1 正则表达式的定义 253<br>10.2 用于模式匹配的String方法 261<br>10.3 RegExp对象 263<br>第11章 JavaScript的子集和扩展 267<br>11.1 JavaScript的子集 268<br>11.2 常量和局部变量 271<br>11.3 解构赋值 274<br>11.4 迭代 276<br>11.5 函数简写 285<br>11.6 多Catch 从句 285<br>11.7 E4X: ECMAScript for XML 286<br>第12章 服务器端JavaScript 290<br>12.1 用Rhino脚本化Java 291<br>12.2 用Node实现异步I/O 297<br>第二部分 客户端JavaScript<br>第13章 Web浏览器中的JavaScript 309<br>13.1 客户端JavaScript 309<br>13.2 在HTML里嵌入JavaScript 313<br>13.3 JavaScript程序的执行 319<br>13.4 兼容性和互用性 326<br>13.5 可访问性 333<br>13.6 安全性 334<br>13.7 客户端框架 339<br>第14章 Window对象 341<br>14.1 计时器 342<br>14.2 浏览器定位和导航 343<br>14.3 浏览历史 345<br>14.4 浏览器和屏幕信息 346<br>14.5 对话框 348<br>14.6 错误处理 351<br>14.7 作为Window对象属性的文档元素 351<br>14.8 多窗口和窗体 353<br>第15章 脚本化文档 361<br>15.1 DOM概览 362<br>15.2 选取文档元素 364<br>15.3 文档结构和遍历 371<br>15.4 属性 375<br>15.5 元素的内容 378<br>15.6 创建、插入和删除节点 382<br>15.7 例子：生成目录表 387<br>15.8 文档和元素的几何形状和滚动 389<br>15.9 HTML表单 396<br>15.10 其他文档特性 404<br>第16章 脚本化CSS 410<br>16.1 CSS概览 411<br>16.2 重要的CSS属性 416<br>16.3 脚本化内联样式 427<br>16.4 查询计算出的样式 431<br>16.5 脚本化CSS类 433<br>16.6 脚本化样式表 435<br>第17章 事件处理 440<br>17.1 事件类型 442<br>17.2 注册事件处理程序 451<br>17.3 事件处理程序的调用 454<br>17.4 文档加载事件 459<br>17.5 鼠标事件 461<br>17.6 鼠标滚轮事件 465<br>17.7 拖放事件 468<br>17.8 文本事件 475<br>17.9 键盘事件 478<br>第18章 脚本化HTTP 484<br>18.1 使用XMLHttpRequest 487<br>18.2 借助<code>&lt;script&gt;</code>发送HTTP请求：JSONP 505<br>18.3 基于服务器端推送事件的Comet技术 508<br>第19章 jQuery类库 514<br>19.1 jQuery基础 515<br>19.2 jQuery的getter和setter 522<br>19.3 修改文档结构 528<br>19.4 用jQuery处理事件 531<br>19.5 动画效果 542<br>19.6 jQuery中的Ajax 550<br>19.7 工具函数 563<br>19.8 jQuery选择器和选取方法 566<br>19.9 jQuery的插件扩展 574<br>19.10 jQuery UI类库 577<br>第20章 客户端存储 579<br>20.1 localStorage和sessionStorage 581<br>20.2 cookie 586<br>20.3 利用IE userData来持久化数据 592<br>20.4 应用程序存储和离线Web应用 594<br>第21章 多媒体和图形编程 606<br>21.1 脚本化图片 606<br>21.2 脚本化音频和视频 608<br>21.3 SVG：可伸缩的矢量图形 615<br>21.4 <code>&lt;canvas&gt;</code>中的图形 623<br>第22章 HTML5 API 658<br>22.1 地理位置 659<br>22.2 历史记录管理 662<br>22.3 跨域消息传递 668<br>22.4 Web Workers 671<br>22.5 类型化数组和ArrayBuffer 678<br>22.6 Blob 682<br>22.7 文件系统API 691<br>22.8 客户端数据库 696<br>22.9 Web套接字 704<br>第三部分 JavaScript核心参考<br>JavaScript核心参考 711<br>第四部分 客户端JavaScript参考<br>客户端JavaScript参考 847</p>
<h2 id="下载试读"><a href="#下载试读" class="headerlink" title="下载试读"></a>下载试读</h2><div class="note info"><div style="word-break:break-all;">百度网盘: <a href="https://pan.baidu.com/s/1Hg9LpfZ8CM8Jt4WHaLm4fQ" rel="external nofollow noreferrer" target="_blank">https://pan.baidu.com/s/1Hg9LpfZ8CM8Jt4WHaLm4fQ</a> </div>
无提取码或已失效: 加个人微信号 <strong>itdianji</strong>，验证消息填 <strong>341521711</strong>，免费获取最新提取码</div>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag"># 前端</a>
          
            <a href="/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag"># 前端开发</a>
          
            <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
          
            <a href="/tags/Web%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" rel="tag"># Web前端开发</a>
          
            <a href="/tags/%E7%8A%80%E7%89%9B%E4%B9%A6/" rel="tag"># 犀牛书</a>
          
            <a href="/tags/Web%E5%BC%80%E5%8F%91/" rel="tag"># Web开发</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/p/1502127616/" rel="prev" title="算法导论原书第2版 [Thomas H.Cormen] [epub]">
                算法导论原书第2版 [Thomas H.Cormen] [epub] <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">电子书</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">43</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="mailto:yourname@gmail.com" rel="external nofollow noreferrer" target="_blank" title="发邮件">
                      
                        <i class="fa fa-fw fa-envelope"></i>发邮件</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#书籍资料"><span class="nav-number">1.</span> <span class="nav-text">书籍资料</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#内容简介"><span class="nav-number">2.</span> <span class="nav-text">内容简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#作者简介"><span class="nav-number">3.</span> <span class="nav-text">作者简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#本书目录"><span class="nav-number">4.</span> <span class="nav-text">本书目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#下载试读"><span class="nav-number">5.</span> <span class="nav-text">下载试读</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-book"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">IT电子书基地</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "./public/search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
